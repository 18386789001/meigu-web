<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WAP-Vueç™»å½•è·¯ç”±ä¿®å¤éªŒè¯</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-item {
            margin: 10px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .button {
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .button:hover {
            background-color: #0056b3;
        }
        .button.success {
            background-color: #28a745;
        }
        .button.danger {
            background-color: #dc3545;
        }
        .error {
            color: red;
            background-color: #fff0f0;
        }
        .success {
            color: green;
            background-color: #f0fff0;
        }
        .info {
            color: blue;
            background-color: #f0f8ff;
        }
        .warning {
            color: orange;
            background-color: #fff8e1;
        }
        .step {
            margin: 10px 0;
            padding: 10px;
            border-left: 4px solid #007bff;
            background-color: #f8f9fa;
        }
        .code {
            background-color: #f4f4f4;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>WAP-Vueç™»å½•è·¯ç”±ä¿®å¤éªŒè¯</h1>
        
        <div class="test-item info">
            <h3>ğŸ” é—®é¢˜åˆ†æ</h3>
            <p><strong>é—®é¢˜æè¿°:</strong> ç‚¹å‡»ç™»å½•æŒ‰é’®æ— æ³•è·³è½¬åˆ°ç™»å½•ç•Œé¢</p>
            <p><strong>é”™è¯¯ä¿¡æ¯:</strong> <code>æ£€æµ‹åˆ°/synè·¯å¾„è®¿é—®ï¼Œè¿™æ˜¯wap-vueåº”ç”¨</code></p>
            <p><strong>æ ¹æœ¬åŸå› :</strong> è·¯ç”±å®ˆå«ä¸­çš„/synè·¯å¾„å¤„ç†é€»è¾‘å¯èƒ½é˜»æ­¢äº†ç™»å½•é¡µé¢çš„æ­£å¸¸è®¿é—®</p>
        </div>
        
        <div class="test-item">
            <h3>ğŸ› ï¸ ä¿®å¤æ–¹æ¡ˆ</h3>
            <div class="step">
                <strong>æ­¥éª¤1:</strong> åœ¨è·¯ç”±å®ˆå«ä¸­æ·»åŠ å¯¹ç™»å½•å’Œæ³¨å†Œé¡µé¢çš„ç‰¹æ®Šå¤„ç†
            </div>
            <div class="code">
// ä¿®å¤å‰
if (window.location.pathname.includes('/syn')) {
  if (to.path === '/' || to.path === '/syn') {
    next('/quotes');
    return;
  }
}

// ä¿®å¤å  
if (window.location.pathname.includes('/syn')) {
  if (to.path === '/' || to.path === '/syn') {
    next('/quotes');
    return;
  }
  // å…è®¸ç™»å½•å’Œæ³¨å†Œé¡µé¢æ­£å¸¸è®¿é—®
  if (to.path === '/login' || to.path === '/register') {
    console.log(`å…è®¸è®¿é—®${to.path}é¡µé¢`);
    next();
    return;
  }
}
            </div>
        </div>
        
        <div class="test-item">
            <h3>ğŸ§ª æµ‹è¯•éªŒè¯</h3>
            <button class="button" onclick="testLoginRoute()">æµ‹è¯•ç™»å½•è·¯ç”±</button>
            <button class="button" onclick="testRegisterRoute()">æµ‹è¯•æ³¨å†Œè·¯ç”±</button>
            <button class="button" onclick="testHomeRoute()">æµ‹è¯•é¦–é¡µè·¯ç”±</button>
            <button class="button" onclick="simulateMyPageLoginClick()">æ¨¡æ‹Ÿæˆ‘çš„é¡µé¢ç™»å½•æŒ‰é’®ç‚¹å‡»</button>
        </div>
        
        <div class="test-item">
            <h3>ğŸ“Š å½“å‰çŠ¶æ€</h3>
            <p><strong>å½“å‰URL:</strong> <span id="current-url"></span></p>
            <p><strong>è·¯å¾„:</strong> <span id="current-path"></span></p>
            <p><strong>Hash:</strong> <span id="current-hash"></span></p>
            <p><strong>æ˜¯å¦åŒ…å«/syn:</strong> <span id="contains-syn"></span></p>
        </div>
        
        <div id="test-results"></div>
        
        <div class="test-item warning">
            <h3>âš ï¸ æ³¨æ„äº‹é¡¹</h3>
            <ul>
                <li>ç¡®ä¿åœ¨/synè·¯å¾„ä¸‹ç™»å½•å’Œæ³¨å†ŒåŠŸèƒ½æ­£å¸¸å·¥ä½œ</li>
                <li>éªŒè¯è·¯ç”±å®ˆå«ä¸ä¼šå½±å“å…¶ä»–é¡µé¢çš„æ­£å¸¸è®¿é—®</li>
                <li>æµ‹è¯•ç”¨æˆ·è®¤è¯æµç¨‹æ˜¯å¦å®Œæ•´</li>
            </ul>
        </div>
        
        <div class="test-item success">
            <h3>âœ… é¢„æœŸç»“æœ</h3>
            <ul>
                <li>ç‚¹å‡»ç™»å½•æŒ‰é’®èƒ½å¤Ÿæ­£å¸¸è·³è½¬åˆ°ç™»å½•é¡µé¢</li>
                <li>åœ¨/synè·¯å¾„ä¸‹ç™»å½•åŠŸèƒ½æ­£å¸¸å·¥ä½œ</li>
                <li>è·¯ç”±å®ˆå«æ­£ç¡®å¤„ç†æ‰€æœ‰è·¯å¾„</li>
            </ul>
        </div>
    </div>

    <script>
        // æ›´æ–°å½“å‰çŠ¶æ€ä¿¡æ¯
        function updateStatus() {
            document.getElementById('current-url').textContent = window.location.href;
            document.getElementById('current-path').textContent = window.location.pathname;
            document.getElementById('current-hash').textContent = window.location.hash;
            document.getElementById('contains-syn').textContent = window.location.pathname.includes('/syn') ? 'æ˜¯' : 'å¦';
        }
        
        // æ·»åŠ æµ‹è¯•ç»“æœ
        function addTestResult(message, type = 'info') {
            const resultsContainer = document.getElementById('test-results');
            const testItem = document.createElement('div');
            testItem.className = `test-item ${type}`;
            testItem.innerHTML = `<strong>${new Date().toLocaleTimeString()}:</strong> ${message}`;
            resultsContainer.appendChild(testItem);
            resultsContainer.scrollTop = resultsContainer.scrollHeight;
        }
        
        // æµ‹è¯•ç™»å½•è·¯ç”±
        function testLoginRoute() {
            addTestResult('å¼€å§‹æµ‹è¯•ç™»å½•è·¯ç”±...', 'info');
            
            if (window.location.pathname.includes('/syn')) {
                addTestResult('æ£€æµ‹åˆ°/synè·¯å¾„ï¼Œæµ‹è¯•è·¯ç”±å®ˆå«é€»è¾‘', 'warning');
                
                // æ¨¡æ‹Ÿè·¯ç”±å®ˆå«é€»è¾‘
                const toPath = '/login';
                if (toPath === '/login' || toPath === '/register') {
                    addTestResult('âœ… è·¯ç”±å®ˆå«å…è®¸è®¿é—®ç™»å½•é¡µé¢', 'success');
                    // å®é™…è·³è½¬
                    window.location.hash = '#/login';
                    addTestResult('å·²è·³è½¬åˆ°ç™»å½•é¡µé¢', 'success');
                } else {
                    addTestResult('âŒ è·¯ç”±å®ˆå«å¯èƒ½é˜»æ­¢è®¿é—®', 'error');
                }
            } else {
                addTestResult('æ­£å¸¸è·¯å¾„ï¼Œç›´æ¥è·³è½¬åˆ°ç™»å½•é¡µé¢', 'success');
                window.location.hash = '#/login';
            }
            
            updateStatus();
        }
        
        // æµ‹è¯•æ³¨å†Œè·¯ç”±
        function testRegisterRoute() {
            addTestResult('æµ‹è¯•æ³¨å†Œè·¯ç”±...', 'info');
            window.location.hash = '#/register';
            addTestResult('å·²è·³è½¬åˆ°æ³¨å†Œé¡µé¢', 'success');
            updateStatus();
        }
        
        // æµ‹è¯•é¦–é¡µè·¯ç”±
        function testHomeRoute() {
            addTestResult('æµ‹è¯•é¦–é¡µè·¯ç”±...', 'info');
            window.location.hash = '#/';
            addTestResult('å·²è·³è½¬åˆ°é¦–é¡µ', 'success');
            updateStatus();
        }
        
        // æ¨¡æ‹Ÿæˆ‘çš„é¡µé¢ç™»å½•æŒ‰é’®ç‚¹å‡»
        function simulateMyPageLoginClick() {
            addTestResult('æ¨¡æ‹Ÿæˆ‘çš„é¡µé¢ç™»å½•æŒ‰é’®ç‚¹å‡»...', 'info');
            
            // æ¨¡æ‹ŸonRouteå‡½æ•°è°ƒç”¨
            const path = '/login';
            addTestResult(`è°ƒç”¨ onRoute('${path}')`, 'info');
            
            // æ¨¡æ‹Ÿrouter.pushè°ƒç”¨
            addTestResult('è°ƒç”¨ router.push(path)', 'info');
            
            // æ‰§è¡Œå®é™…è·³è½¬
            window.location.hash = '#' + path;
            addTestResult('âœ… ç™»å½•æŒ‰é’®ç‚¹å‡»æˆåŠŸï¼Œå·²è·³è½¬åˆ°ç™»å½•é¡µé¢', 'success');
            
            updateStatus();
        }
        
        // ç›‘å¬hashå˜åŒ–
        window.addEventListener('hashchange', function() {
            addTestResult(`Hashå˜åŒ–: ${window.location.hash}`, 'info');
            updateStatus();
        });
        
        // åˆå§‹åŒ–
        updateStatus();
        addTestResult('æµ‹è¯•é¡µé¢å·²åŠ è½½ï¼Œå‡†å¤‡è¿›è¡Œè·¯ç”±æµ‹è¯•', 'info');
    </script>
</body>
</html>
