# 大宗商品卡片显示调整说明

## 修改时间
2025年11月6日

## 修改目的
调整大宗商品行情页面卡片显示内容，优化交易品种和商品名称的显示规则。

## 访问路径
- 页面路径：`syn/?lang=en#/quotes/index?tabActive=0`
- API接口：`https://jpmx.xyz/api/publicRealtimeByType?type=forex&pageNo=1&category=commodities&language=zh-CN`

## 修改规则

### 显示规则
1. **黄金（GOLD）**
   - 交易品种：`XAUUSD`
   - 商品名称：`Gold`

2. **白银（Silver）**
   - 交易品种：`XAGUSD`
   - 商品名称：`Silver`

3. **其他商品**（如 Aluminum、COPPER、Lead、Zinc、Nickel、Platinum、Palladium 等）
   - 交易品种：使用 `symbol` 字段的值
   - 商品名称：使用 `symbol` 字段的值

### 示例对比

| API返回的symbol | 修改前 | 修改后 |
|----------------|--------|--------|
| GOLD | XAUUSD / 黄金（XAUUSD） | XAUUSD / Gold |
| Silver | XAGUSD / 白银（XAGUSD） | XAGUSD / Silver |
| Aluminum | XALUSD / 铝（XALUSD） | Aluminum / Aluminum |
| COPPER | XCUUSD / 铜（XCUUSD） | COPPER / COPPER |
| Lead | XPBUSD / 铅（XPBUSD） | Lead / Lead |
| Zinc | XZNUSD / 锌（XZNUSD） | Zinc / Zinc |
| Nickel | XNIUSD / 镍（XNIUSD） | Nickel / Nickel |
| Platinum | XPTUSD / 铂金（XPTUSD） | Platinum / Platinum |
| Palladium | XPDUSD / 钯（XPDUSD） | Palladium / Palladium |

## 技术实现

### 修改文件
`wap-vue/src/views/commodities/List.vue`

### 修改内容

#### 1. 修改模板部分（第72-73行）

**修改前：**
```vue
<div class="commodity-symbol">{{ extractSymbolFromName(item.name) || item.symbol }}</div>
<div class="commodity-name">{{ getCommodityName(item.symbol) }}</div>
```

**修改后：**
```vue
<div class="commodity-symbol">{{ getDisplaySymbol(item) }}</div>
<div class="commodity-name">{{ getDisplayName(item.symbol) }}</div>
```

#### 2. 新增函数（第384-410行）

**添加 `getDisplaySymbol` 函数：**
```javascript
// 获取显示的交易品种符号
const getDisplaySymbol = (item) => {
  // 黄金：symbol=GOLD，显示XAUUSD
  if (item.symbol === 'GOLD') {
    return 'XAUUSD'
  }
  // 白银：symbol=Silver，显示XAGUSD
  if (item.symbol === 'Silver') {
    return 'XAGUSD'
  }
  // 其他商品：直接使用symbol
  return item.symbol
}
```

**添加 `getDisplayName` 函数：**
```javascript
// 获取显示的商品名称
const getDisplayName = (symbol) => {
  // 黄金：显示Gold
  if (symbol === 'GOLD') {
    return 'Gold'
  }
  // 白银：显示Silver
  if (symbol === 'Silver') {
    return 'Silver'
  }
  // 其他商品：直接返回symbol
  return symbol
}
```

## API数据结构示例

```json
{
  "data": [
    {
      "symbol": "GOLD",
      "name": "黄金（XAUUSD）",
      "enName": "XAUUSD",
      "close": 3982.63,
      "changeRatio": 0.01,
      "high": 4016.85,
      "low": 3964.76,
      "open": 3979.99
    },
    {
      "symbol": "Silver",
      "name": "白银（XAGUSD）",
      "enName": "XAGUSD",
      "close": 47.91,
      "changeRatio": 0.01
    },
    {
      "symbol": "Aluminum",
      "name": "铝（XALUSD）",
      "enName": "XAUUSD",
      "close": 2838.2,
      "changeRatio": 0.0
    },
    {
      "symbol": "COPPER",
      "name": "铜（XCUUSD）",
      "enName": "XAUUSD",
      "close": 5.01,
      "changeRatio": -0.02
    }
  ]
}
```

## 测试要点

1. **黄金卡片**
   - 交易品种显示为：`XAUUSD`
   - 商品名称显示为：`Gold`

2. **白银卡片**
   - 交易品种显示为：`XAGUSD`
   - 商品名称显示为：`Silver`

3. **其他商品卡片**（以铝为例）
   - 交易品种显示为：`Aluminum`
   - 商品名称显示为：`Aluminum`

4. **验证不同语言环境**
   - 在英文、中文、日文环境下，显示规则应保持一致
   - 交易品种和商品名称不受语言切换影响

## 注意事项

1. 此修改仅影响大宗商品卡片的**交易品种**和**商品名称**显示
2. 不影响价格、涨跌幅、成交量等其他数据的显示
3. 不影响商品详情页面的显示
4. 图标、价格颜色、暗黑模式等其他功能保持不变

## 部署说明

### 开发环境
1. 进入项目目录：
   ```bash
   cd D:\Awww\mt5new\template\wap-vue
   ```

2. 重启开发服务器：
   ```bash
   # 停止当前服务器（Ctrl + C）
   npm run dev
   ```

3. 清除浏览器缓存并硬刷新（Ctrl + Shift + R）

### 生产环境
1. 构建项目：
   ```bash
   cd D:\Awww\mt5new\template\wap-vue
   npm run build
   ```

2. 将构建产物部署到生产服务器

3. 通知用户清除浏览器缓存或进行硬刷新

## 预期效果

修改完成后，大宗商品行情页面将展示：
- **黄金**：`XAUUSD` / `Gold`
- **白银**：`XAGUSD` / `Silver`
- **铝**：`Aluminum` / `Aluminum`
- **铜**：`COPPER` / `COPPER`
- **铅**：`Lead` / `Lead`
- **锌**：`Zinc` / `Zinc`
- **镍**：`Nickel` / `Nickel`
- **铂金**：`Platinum` / `Platinum`
- **钯金**：`Palladium` / `Palladium`
- **布伦特原油**：`UKOIL` / `UKOIL`
- **原油**：`USOIL` / `USOIL`

## 完成状态
✅ 代码修改完成
✅ 无 Lint 错误
✅ 文档记录完成

