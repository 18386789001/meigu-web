<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WAP-Vueé»˜è®¤ä¸»é¢˜æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f5f5f5;
            transition: all 0.3s ease;
        }
        
        body[theme="dark"] {
            background-color: #0d1117;
            color: #c9d1d9;
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        
        body[theme="dark"] .test-container {
            background-color: #161b22;
            color: #c9d1d9;
            border: 1px solid #30363d;
        }
        
        .test-item {
            margin: 10px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            transition: all 0.3s ease;
        }
        
        body[theme="dark"] .test-item {
            border-color: #30363d;
            background-color: #21262d;
        }
        
        .button {
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s ease;
        }
        
        .button:hover {
            background-color: #0056b3;
        }
        
        .button.dark {
            background-color: #58a6ff;
        }
        
        body[theme="dark"] .button.dark {
            background-color: #1f6feb;
        }
        
        .error {
            color: red;
            background-color: #fff0f0;
        }
        
        body[theme="dark"] .error {
            background-color: #490202;
        }
        
        .success {
            color: green;
            background-color: #f0fff0;
        }
        
        body[theme="dark"] .success {
            background-color: #0d2818;
        }
        
        .info {
            color: blue;
            background-color: #f0f8ff;
        }
        
        body[theme="dark"] .info {
            background-color: #0d1117;
        }
        
        .warning {
            color: orange;
            background-color: #fff8e1;
        }
        
        body[theme="dark"] .warning {
            background-color: #3d2c00;
        }
        
        .step {
            margin: 10px 0;
            padding: 10px;
            border-left: 4px solid #007bff;
            background-color: #f8f9fa;
        }
        
        body[theme="dark"] .step {
            background-color: #161b22;
            border-left-color: #58a6ff;
        }
        
        .code {
            background-color: #f4f4f4;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            margin: 10px 0;
        }
        
        body[theme="dark"] .code {
            background-color: #21262d;
            color: #c9d1d9;
        }
        
        .theme-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 10px 15px;
            border-radius: 20px;
            font-weight: bold;
            z-index: 1000;
            transition: all 0.3s ease;
        }
        
        .theme-indicator.light {
            background-color: #ffffff;
            color: #000000;
            border: 2px solid #000000;
        }
        
        .theme-indicator.dark {
            background-color: #0d1117;
            color: #58a6ff;
            border: 2px solid #58a6ff;
        }
    </style>
</head>
<body theme="dark">
    <div class="theme-indicator dark" id="theme-indicator">
        ğŸŒ™ æš—é»‘æ¨¡å¼
    </div>
    
    <div class="test-container">
        <h1>WAP-Vueé»˜è®¤ä¸»é¢˜æµ‹è¯•</h1>
        
        <div class="test-item info">
            <h3>ğŸ¯ æµ‹è¯•ç›®æ ‡</h3>
            <p>éªŒè¯WAP-Vueåº”ç”¨åœ¨é¦–æ¬¡è®¿é—®æ—¶é»˜è®¤ä½¿ç”¨æš—é»‘æ¨¡å¼</p>
        </div>
        
        <div class="test-item">
            <h3>ğŸ”§ ä¿®å¤å†…å®¹</h3>
            <div class="step">
                <strong>ä¿®å¤å‰:</strong> åº”ç”¨å¯åŠ¨æ—¶å¼ºåˆ¶è®¾ç½®ä¸ºç™½è‰²ä¸»é¢˜
            </div>
            <div class="code">
thStore[SET_THEME]("white", false); // å¼ºåˆ¶ç™½è‰²ä¸»é¢˜
            </div>
            
            <div class="step">
                <strong>ä¿®å¤å:</strong> é¦–æ¬¡è®¿é—®é»˜è®¤ä½¿ç”¨æš—é»‘æ¨¡å¼
            </div>
            <div class="code">
//è®¾ç½®ä¸»é¢˜ - é»˜è®¤ä½¿ç”¨æš—é»‘æ¨¡å¼
if (!getStorage("theme")) {
  // é¦–æ¬¡è®¿é—®ï¼Œè®¾ç½®é»˜è®¤ä¸»é¢˜ä¸ºæš—é»‘æ¨¡å¼
  thStore[SET_THEME]("dark", false);
} else {
  // ä½¿ç”¨å­˜å‚¨çš„ä¸»é¢˜è®¾ç½®
  thStore[SET_THEME](thStore.theme, false);
}
            </div>
        </div>
        
        <div class="test-item">
            <h3>ğŸ§ª ä¸»é¢˜æµ‹è¯•</h3>
            <button class="button dark" onclick="setTheme('dark')">åˆ‡æ¢åˆ°æš—é»‘æ¨¡å¼</button>
            <button class="button" onclick="setTheme('white')">åˆ‡æ¢åˆ°äº®è‰²æ¨¡å¼</button>
            <button class="button" onclick="clearThemeStorage()">æ¸…é™¤ä¸»é¢˜å­˜å‚¨ï¼ˆæ¨¡æ‹Ÿé¦–æ¬¡è®¿é—®ï¼‰</button>
            <button class="button" onclick="simulateAppLoad()">æ¨¡æ‹Ÿåº”ç”¨åŠ è½½</button>
        </div>
        
        <div class="test-item">
            <h3>ğŸ“Š å½“å‰çŠ¶æ€</h3>
            <p><strong>å½“å‰ä¸»é¢˜:</strong> <span id="current-theme">dark</span></p>
            <p><strong>localStorageä¸­çš„ä¸»é¢˜:</strong> <span id="stored-theme">dark</span></p>
            <p><strong>document.documentElement.getAttribute('theme'):</strong> <span id="document-theme">dark</span></p>
            <p><strong>æ˜¯å¦ä¸ºé¦–æ¬¡è®¿é—®:</strong> <span id="is-first-visit">å¦</span></p>
        </div>
        
        <div id="test-results"></div>
        
        <div class="test-item warning">
            <h3>âš ï¸ æ³¨æ„äº‹é¡¹</h3>
            <ul>
                <li>é¦–æ¬¡è®¿é—®åº”ç”¨æ—¶åº”è¯¥é»˜è®¤æ˜¾ç¤ºæš—é»‘æ¨¡å¼</li>
                <li>ç”¨æˆ·æ‰‹åŠ¨åˆ‡æ¢ä¸»é¢˜åï¼Œåº”è¯¥è®°ä½ç”¨æˆ·çš„é€‰æ‹©</li>
                <li>ä¸»é¢˜åˆ‡æ¢åº”è¯¥æœ‰å¹³æ»‘çš„è¿‡æ¸¡åŠ¨ç”»</li>
            </ul>
        </div>
        
        <div class="test-item success">
            <h3>âœ… é¢„æœŸç»“æœ</h3>
            <ul>
                <li>æ‰“å¼€ <code>http://localhost:333/syn/</code> é»˜è®¤æ˜¾ç¤ºæš—é»‘æ¨¡å¼</li>
                <li>ä¸»é¢˜å­˜å‚¨ä¸­é»˜è®¤å€¼ä¸º "dark"</li>
                <li>é¡µé¢æ ·å¼æ­£ç¡®åº”ç”¨æš—é»‘ä¸»é¢˜</li>
                <li>ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½æ­£å¸¸å·¥ä½œ</li>
            </ul>
        </div>
    </div>

    <script>
        // æ¨¡æ‹ŸlocalStorage
        let mockStorage = {
            theme: localStorage.getItem('theme')
        };
        
        // è®¾ç½®ä¸»é¢˜
        function setTheme(theme) {
            document.documentElement.setAttribute('theme', theme);
            localStorage.setItem('theme', theme);
            mockStorage.theme = theme;
            
            // æ›´æ–°ä¸»é¢˜æŒ‡ç¤ºå™¨
            const indicator = document.getElementById('theme-indicator');
            if (theme === 'dark') {
                indicator.className = 'theme-indicator dark';
                indicator.innerHTML = 'ğŸŒ™ æš—é»‘æ¨¡å¼';
            } else {
                indicator.className = 'theme-indicator light';
                indicator.innerHTML = 'â˜€ï¸ äº®è‰²æ¨¡å¼';
            }
            
            updateStatus();
            addTestResult(`ä¸»é¢˜å·²åˆ‡æ¢åˆ°: ${theme}`, 'success');
        }
        
        // æ¸…é™¤ä¸»é¢˜å­˜å‚¨
        function clearThemeStorage() {
            localStorage.removeItem('theme');
            mockStorage.theme = null;
            updateStatus();
            addTestResult('å·²æ¸…é™¤ä¸»é¢˜å­˜å‚¨ï¼Œæ¨¡æ‹Ÿé¦–æ¬¡è®¿é—®', 'info');
        }
        
        // æ¨¡æ‹Ÿåº”ç”¨åŠ è½½
        function simulateAppLoad() {
            addTestResult('æ¨¡æ‹Ÿåº”ç”¨åŠ è½½...', 'info');
            
            // æ¨¡æ‹ŸApp.vueä¸­çš„ä¸»é¢˜è®¾ç½®é€»è¾‘
            if (!mockStorage.theme) {
                addTestResult('æ£€æµ‹åˆ°é¦–æ¬¡è®¿é—®ï¼Œè®¾ç½®é»˜è®¤ä¸»é¢˜ä¸ºæš—é»‘æ¨¡å¼', 'success');
                setTheme('dark');
            } else {
                addTestResult(`ä½¿ç”¨å­˜å‚¨çš„ä¸»é¢˜è®¾ç½®: ${mockStorage.theme}`, 'info');
                setTheme(mockStorage.theme);
            }
        }
        
        // æ›´æ–°çŠ¶æ€æ˜¾ç¤º
        function updateStatus() {
            const currentTheme = document.documentElement.getAttribute('theme') || 'dark';
            const storedTheme = localStorage.getItem('theme') || 'null';
            const isFirstVisit = !localStorage.getItem('theme');
            
            document.getElementById('current-theme').textContent = currentTheme;
            document.getElementById('stored-theme').textContent = storedTheme;
            document.getElementById('document-theme').textContent = currentTheme;
            document.getElementById('is-first-visit').textContent = isFirstVisit ? 'æ˜¯' : 'å¦';
        }
        
        // æ·»åŠ æµ‹è¯•ç»“æœ
        function addTestResult(message, type = 'info') {
            const resultsContainer = document.getElementById('test-results');
            const testItem = document.createElement('div');
            testItem.className = `test-item ${type}`;
            testItem.innerHTML = `<strong>${new Date().toLocaleTimeString()}:</strong> ${message}`;
            resultsContainer.appendChild(testItem);
            resultsContainer.scrollTop = resultsContainer.scrollHeight;
        }
        
        // åˆå§‹åŒ–
        updateStatus();
        addTestResult('æµ‹è¯•é¡µé¢å·²åŠ è½½ï¼Œå½“å‰ä½¿ç”¨æš—é»‘æ¨¡å¼ä½œä¸ºé»˜è®¤ä¸»é¢˜', 'success');
        
        // æ£€æŸ¥æ˜¯å¦æ˜¯é¦–æ¬¡è®¿é—®
        if (!localStorage.getItem('theme')) {
            addTestResult('æ£€æµ‹åˆ°é¦–æ¬¡è®¿é—®ï¼Œåº”ç”¨é»˜è®¤æš—é»‘ä¸»é¢˜', 'success');
        } else {
            addTestResult(`æ£€æµ‹åˆ°å·²ä¿å­˜çš„ä¸»é¢˜: ${localStorage.getItem('theme')}`, 'info');
        }
    </script>
</body>
</html>
