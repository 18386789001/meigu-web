# 出金报表页面配置说明

## 页面文件位置
`src/views/modules/order/chujin.vue`

## 功能说明
该页面整合了两个提现接口的数据：
1. **银行卡提现记录** - 显示direction为"withdraw"且状态为已完成(state=3)的订单
2. **数字货币提现记录** - 显示status为1（已处理）的订单

## 页面功能特性
- ✅ 搜索功能：支持按订单号、用户名、用户UID搜索
- ✅ 筛选功能：可按出金方式（银行卡/数字货币）筛选
- ✅ 数据整合：将两个接口的数据合并显示在一个表格中
- ✅ 分页功能：支持前端分页
- ✅ 刷新功能：支持手动刷新数据

## 显示字段对比

### 银行卡提现
| 字段名 | 数据来源 | 说明 |
|--------|---------|------|
| 订单号 | order_no | |
| 用户名 | username | |
| UID | usercode | 用户UID |
| 实名姓名 | realname | |
| 出金方式 | - | 固定显示"银行卡提现" |
| 支付币种 | currency | |
| 到账币种 | symbol | |
| 币种单价 | symbol_value | |
| 提现数量 | coin_amount | |
| 到账数量 | coin_amount | |
| 手续费 | coin_amount_fee | |
| 支付金额 | amount | |
| 备注 | remark | |
| 创建时间 | create_time | |
| 审核时间 | update_time | |

### 数字货币提现
| 字段名 | 数据来源 | 说明 |
|--------|---------|------|
| 订单号 | orderNo | |
| 用户名 | userName | |
| UID | userCode | 用户UID |
| 实名姓名 | realName / fullName | |
| 出金方式 | - | 固定显示"数字货币提现" |
| 支付币种 | coin / blockchainName | |
| 到账币种 | coin | |
| 提现数量 | amount / withdrawAmount | |
| 到账数量 | receiveAmount / actualAmount | |
| 手续费 | fee | |
| 支付金额 | amount | |
| 提现币链 | blockchainName / blockchain | |
| 币链地址 | address / withdrawAddress | |
| 备注 | description / remark | |
| 创建时间 | createTime | |
| 审核时间 | reviewTime / auditTime | |

## 如何添加到菜单中

### 方法1：通过后台管理系统配置（推荐）
1. 登录管理后台
2. 找到菜单管理功能
3. 添加新菜单项：
   - 菜单名称：出金报表
   - 路由地址：order/order-chujin
   - 父菜单：选择订单管理或报表管理
   - 权限标识：order:chujin:page

### 方法2：手动修改配置文件
在 `src/menu.js` 中添加菜单项（找到合适的父菜单ID，例如337是报表管理）：

```javascript
{
  menuId: 1000, // 使用一个唯一的ID
  parentId: 337, // 报表管理的父ID，根据实际情况修改
  parentName: null,
  name: "出金报表",
  url: "order/order-chujin",
  perms: "order:chujin:page",
  type: 1,
  icon: "order",
  orderNum: 1,
  list: null,
  appType: "1",
}
```

### 方法3：在路由配置中添加（如果使用动态路由）
检查项目是否在 `src/router/index.js` 中配置了路由，如果是静态路由，需要添加：

```javascript
{
  path: '/order/order-chujin',
  component: () => import('@/views/modules/order/chujin'),
  name: 'order-chujin',
  meta: { title: '出金报表', isTab: true }
}
```

## API接口说明

### 银行卡提现接口
- **URL**: https://jpmx.xyz/apis/bankCardOrder/list
- **方法**: POST
- **参数**: 
  ```json
  {
    "t": 1760209407337,
    "current": 1,
    "size": 10
  }
  ```
- **筛选条件**: `direction === "withdraw" && state === "3"`

### 数字货币提现接口
- **URL**: https://jpmx.xyz/apis/withdraw/list
- **方法**: POST
- **参数**: 
  ```json
  {
    "t": 1760213684969,
    "status": "1",
    "current": 1,
    "size": 10
  }
  ```
- **筛选条件**: `status === 1`（已处理）

## 访问路径
配置完成后，可通过以下URL访问：
- 本地开发环境：http://localhost:9528/#/order/order-chujin
- 生产环境：根据实际域名访问

## 注意事项
1. 该页面会同时请求两个接口，请确保接口可访问且有权限
2. 如果数据量很大，可能需要优化为后端分页
3. 确保登录状态有效，否则接口会返回403错误
4. 页面使用前端分页，当前设置为获取1000条记录
5. 数字货币提现订单的字段名可能因API返回格式不同而需要调整

## 与入金报表的区别
| 项目 | 入金报表 | 出金报表 |
|-----|---------|---------|
| 银行卡接口筛选 | direction === "recharge" | direction === "withdraw" |
| 数字货币接口 | /rechargeOrder/list | /withdraw/list |
| 主要操作 | 充值入账 | 提现出账 |
| 特有字段 | 充值币链、币链地址 | 提现币链、到账数量 |

## 测试方法
1. 启动开发服务器：`yarn dev`
2. 在浏览器中访问：http://localhost:9528/#/order/order-chujin
3. 测试搜索、筛选、分页等功能
4. 检查数据是否正确显示
5. 对比入金报表，确保两个页面风格一致

## 故障排查
如果页面无法访问或数据不显示：
1. 检查浏览器控制台是否有错误
2. 检查Network标签页中API请求是否成功
   - 银行卡提现：bankCardOrder/list
   - 数字货币提现：withdraw/list
3. 确认登录token是否有效
4. 检查路由配置是否正确
5. 查看menu.js中菜单配置是否添加
6. 确认数字货币提现接口返回的字段名是否与代码中映射的字段一致

## 字段映射灵活性
数字货币提现接口的字段映射使用了多个可能的字段名，以适应不同的API返回格式：
- 实名姓名：`realName || fullName`
- 支付币种：`coin || blockchainName`
- 提现数量：`amount || withdrawAmount`
- 到账数量：`receiveAmount || actualAmount`
- 提现币链：`blockchainName || blockchain`
- 币链地址：`address || withdrawAddress`
- 备注：`description || remark`
- 审核时间：`reviewTime || auditTime`

如果实际接口返回的字段名不同，请修改 `mergeAndFormatData` 方法中的字段映射。

## 数据验证建议
建议在测试时：
1. 检查银行卡提现和数字货币提现的数据是否都能正常显示
2. 验证搜索功能是否能同时搜索两种类型的订单
3. 确认筛选功能能正确区分两种提现方式
4. 检查所有字段是否正确映射和显示

