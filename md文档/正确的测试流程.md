# ⚠️ 重要：正确的测试流程

## 🔴 常见错误

### ❌ 错误做法：直接访问 WAP-Vue
```
直接在浏览器输入：https://jpmx.xyz/syn/#/my/index
```
这样**不会**有语言参数，因为没有经过 H5-Vue 的跳转逻辑。

### ✅ 正确做法：从 H5-Vue 点击登录跳转
```
1. 访问 H5-Vue 页面
2. 选择语言
3. 点击登录/注册按钮
4. 自动跳转到 WAP-Vue（带语言参数）
```

---

## 📋 完整测试步骤

### 第 1 步：确认 H5-Vue 开发服务器已启动

```bash
cd D:\Awww\mt5new\template\h5-vue
yarn dev
```

等待服务器启动，通常会显示：
```
  ➜  Local:   http://localhost:5173/
  ➜  Network: http://192.168.x.x:5173/
```

### 第 2 步：在浏览器打开 H5-Vue 页面

**重要**：必须访问 H5-Vue 的地址，不是 WAP-Vue！

```
http://localhost:5173/
```

或生产环境：
```
https://jpmx.xyz/h5/
```

### 第 3 步：打开浏览器开发者工具

按 `F12` 打开开发者工具，切换到 **Console** 标签页

### 第 4 步：选择语言

1. 在 H5-Vue 页面，点击右上角的语言选择器
2. 选择任意语言，例如：**日本語 🇯🇵**
3. 观察控制台，应该看到语言切换的日志

### 第 5 步：点击登录按钮

1. 点击左上角的汉堡菜单按钮（☰）
2. 侧边栏会滑出来
3. 找到"账户"部分（Account）
4. **点击"登录"（Login）按钮**

### 第 6 步：查看控制台日志（关键！）

**在跳转之前**，您应该在控制台看到：

```
🔗 跳转到登录页
📝 当前语言代码 (H5): ja-JP
📝 转换后语言代码 (WAP): Japanese
🌐 生成的登录URL: https://jpmx.xyz/syn/?lang=Japanese#/my/index
```

**如果没有看到这些日志**，说明：
- 您不是在 H5-Vue 页面操作的
- 或者代码没有更新
- 或者浏览器缓存了旧代码

### 第 7 步：验证跳转后的 URL

跳转后，浏览器地址栏应该显示：
```
https://jpmx.xyz/syn/?lang=Japanese#/my/index
                      ↑
                 语言参数（关键！）
```

**如果 URL 中没有 `?lang=Japanese`**，说明跳转逻辑有问题。

### 第 8 步：验证 WAP-Vue 的日志

跳转到 WAP-Vue 后，控制台应该显示：

```
🚀 WAP-Vue 应用启动
🌐 WAP-Vue: 从URL获取到语言参数: Japanese
🌐 WAP-Vue: 检测到URL语言参数，设置语言为: Japanese
🌐 从H5页面接收到语言参数: Japanese
🌐 已自动切换到指定语言
```

---

## 🎯 两个页面的区别

### H5-Vue 页面（桌面版/移动H5）
- URL: `http://localhost:5173/` 或 `https://jpmx.xyz/h5/`
- 特点：有完整的首页、导航菜单
- 作用：用户选择语言并跳转
- **这是测试的起点！**

### WAP-Vue 页面（移动端应用）
- URL: `https://jpmx.xyz/syn/#/my/index`
- 特点：移动端交易应用
- 作用：接收语言参数并应用
- **这是测试的终点！**

---

## 🔍 如何确认当前在哪个页面

### 在 H5-Vue 页面
- 页面顶部有 "JPMX" logo
- 右上角有语言选择器
- 左上角有汉堡菜单（☰）
- 页面中央有 "Trade Possibilities with JPMX Anywhere"
- 有 "Start Trading" 和 "Login Account" 按钮
- URL 包含 `localhost:5173` 或路径为 `/h5/`

### 在 WAP-Vue 页面
- 底部有导航栏（Home, Trading, Market, More）
- 页面是移动端样式
- URL 包含 `/syn/`

---

## 🐛 问题排查

### 问题 1：没有看到 H5-Vue 的控制台日志

**原因**：
- 不是在 H5-Vue 页面操作
- 代码没有更新
- 浏览器缓存

**解决**：
1. 确认访问的是 H5-Vue 页面（`http://localhost:5173/`）
2. 硬刷新页面（Ctrl + Shift + R）
3. 清除浏览器缓存
4. 重启开发服务器

### 问题 2：跳转的 URL 没有语言参数

**原因**：
- H5-Vue 的代码没有更新
- `domainManager.js` 没有正确处理 hash

**解决**：
1. 检查文件是否已保存：
   - `h5-vue/src/utils/domainManager.js`
   - `h5-vue/src/App.vue`
2. 重启开发服务器
3. 清除浏览器缓存

### 问题 3：WAP-Vue 没有识别语言参数

**原因**：
- URL 参数在 hash 之后
- WAP-Vue 的 `languageInit.js` 没有更新

**解决**：
1. 检查 URL 格式是否正确
2. 确认 `wap-vue/src/utils/languageInit.js` 已更新

---

## 📝 测试检查清单

在开始测试前，请确认：

- [ ] H5-Vue 开发服务器已启动
- [ ] 浏览器开发者工具已打开（F12）
- [ ] 访问的是 H5-Vue 页面（不是 WAP-Vue）
- [ ] 能看到语言选择器
- [ ] 能看到汉堡菜单
- [ ] 清除了浏览器缓存

测试过程中，请检查：

- [ ] 选择语言后有日志输出
- [ ] 点击登录前能看到详细日志（包含生成的URL）
- [ ] 生成的 URL 格式正确（参数在 hash 之前）
- [ ] 实际跳转的 URL 包含语言参数
- [ ] WAP-Vue 页面显示对应语言

---

## 🎬 视频教程式步骤说明

### Step 1: 打开 H5-Vue
```
1. 在浏览器地址栏输入：http://localhost:5173/
2. 按回车
3. 等待页面加载
4. 确认看到 "JPMX" 首页
```

### Step 2: 打开控制台
```
1. 按 F12 键
2. 点击 "Console" 标签
3. 确保控制台可见
```

### Step 3: 选择日语
```
1. 点击右上角的语言选择器（显示 "English"）
2. 在下拉菜单中点击 "日本語 🇯🇵"
3. 观察控制台输出
```

### Step 4: 打开侧边栏
```
1. 点击左上角的三条横线（☰）
2. 侧边栏从左侧滑出
3. 看到多个菜单项
```

### Step 5: 点击登录
```
1. 在侧边栏中滚动到 "Account" 部分
2. **点击 "Login" 按钮**
3. **立即查看控制台！**
```

### Step 6: 检查日志
```
控制台应该显示：
🔗 跳转到登录页
📝 当前语言代码 (H5): ja-JP
📝 转换后语言代码 (WAP): Japanese
🌐 生成的登录URL: https://jpmx.xyz/syn/?lang=Japanese#/my/index
```

### Step 7: 检查跳转后的 URL
```
地址栏应该显示：
https://jpmx.xyz/syn/?lang=Japanese#/my/index
```

---

## 💡 温馨提示

1. **一定要从 H5-Vue 页面开始测试**
2. **不要直接访问 WAP-Vue 页面**
3. **点击登录前先查看控制台是否有日志**
4. **如果没有日志，说明不在 H5-Vue 页面或代码未生效**
5. **必须通过点击按钮跳转，不能手动输入 URL**

---

## 🆘 如果还是不行

请提供以下信息：

1. **访问的完整 URL**（地址栏）
2. **控制台的完整日志**（截图或文字）
3. **点击登录前的截图**（显示页面内容）
4. **点击登录后的 URL**（地址栏）
5. **使用的浏览器名称和版本**

---

**记住：必须从 H5-Vue 页面点击登录，才会有语言参数！**

