<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>URLç”Ÿæˆæµ‹è¯•å·¥å…·</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #667eea;
            text-align: center;
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 8px;
        }
        .test-button {
            display: inline-block;
            padding: 10px 20px;
            margin: 5px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }
        .test-button:hover {
            background: #5568d3;
        }
        .result-box {
            background: #282c34;
            color: #61dafb;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Consolas', monospace;
            margin: 10px 0;
            white-space: pre-wrap;
            word-break: break-all;
        }
        .success {
            background: #f0f9ff;
            border-left: 4px solid #67C23A;
            padding: 15px;
            margin: 10px 0;
        }
        .error {
            background: #fef0f0;
            border-left: 4px solid #F56C6C;
            padding: 15px;
            margin: 10px 0;
        }
        .info {
            background: #e1f3ff;
            border-left: 4px solid #409EFF;
            padding: 15px;
            margin: 10px 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        th, td {
            padding: 10px;
            text-align: left;
            border: 1px solid #ddd;
        }
        th {
            background: #667eea;
            color: white;
        }
        tr:nth-child(even) {
            background: #f9f9f9;
        }
        .check-icon {
            font-size: 20px;
            margin-right: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ URLç”Ÿæˆæµ‹è¯•å·¥å…·</h1>
        
        <div class="info">
            <strong>ğŸ“Œ æµ‹è¯•ç›®çš„</strong><br>
            éªŒè¯URLç”Ÿæˆå‡½æ•°æ˜¯å¦æ­£ç¡®å¤„ç†hashè·¯ç”±å’ŒæŸ¥è¯¢å‚æ•°
        </div>

        <div class="test-section">
            <h2>1ï¸âƒ£ åŸºç¡€URLç”Ÿæˆæµ‹è¯•</h2>
            <button class="test-button" onclick="testBasicUrl()">æµ‹è¯•åŸºç¡€URL</button>
            <div id="basic-result"></div>
        </div>

        <div class="test-section">
            <h2>2ï¸âƒ£ å¸¦è¯­è¨€å‚æ•°çš„URLæµ‹è¯•</h2>
            <button class="test-button" onclick="testUrlWithLang('en')">English</button>
            <button class="test-button" onclick="testUrlWithLang('Japanese')">æ—¥æœ¬èª</button>
            <button class="test-button" onclick="testUrlWithLang('Korean')">í•œêµ­ì–´</button>
            <button class="test-button" onclick="testUrlWithLang('th')">à¹„à¸—à¸¢</button>
            <button class="test-button" onclick="testUrlWithLang('CN')">ä¸­æ–‡</button>
            <div id="lang-result"></div>
        </div>

        <div class="test-section">
            <h2>3ï¸âƒ£ Hashä½ç½®éªŒè¯</h2>
            <button class="test-button" onclick="validateHashPosition()">éªŒè¯Hashä½ç½®</button>
            <div id="hash-result"></div>
        </div>

        <div class="test-section">
            <h2>4ï¸âƒ£ æ‰€æœ‰è¯­è¨€æµ‹è¯•</h2>
            <button class="test-button" onclick="testAllLanguages()">æµ‹è¯•æ‰€æœ‰è¯­è¨€</button>
            <div id="all-lang-result"></div>
        </div>

        <div class="test-section">
            <h2>5ï¸âƒ£ URLæ ¼å¼å¯¹æ¯”</h2>
            <table>
                <thead>
                    <tr>
                        <th>æ ¼å¼</th>
                        <th>ç¤ºä¾‹</th>
                        <th>çŠ¶æ€</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>âœ… æ­£ç¡®æ ¼å¼</td>
                        <td><code>https://jpmx.xyz/syn/?lang=Japanese#/my/index</code></td>
                        <td style="color: green;">å‚æ•°åœ¨hashä¹‹å‰</td>
                    </tr>
                    <tr>
                        <td>âŒ é”™è¯¯æ ¼å¼</td>
                        <td><code>https://jpmx.xyz/syn/#/my/index?lang=Japanese</code></td>
                        <td style="color: red;">å‚æ•°åœ¨hashä¹‹å</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // æ¨¡æ‹ŸgenerateUrlå‡½æ•°
        function generateUrl(path = '', params = {}) {
            const protocol = 'https';
            const domain = 'jpmx.xyz';
            
            // æ£€æŸ¥è·¯å¾„ä¸­æ˜¯å¦åŒ…å«hash (#)
            let hashPart = '';
            let pathPart = path;
            if (path.includes('#')) {
                const hashIndex = path.indexOf('#');
                pathPart = path.substring(0, hashIndex);
                hashPart = path.substring(hashIndex);
            }
            
            let fullUrl = `${protocol}://${domain}${pathPart}`;
            
            // æ·»åŠ æŸ¥è¯¢å‚æ•°ï¼ˆåœ¨hashä¹‹å‰ï¼‰
            if (Object.keys(params).length > 0) {
                const searchParams = new URLSearchParams();
                Object.entries(params).forEach(([key, value]) => {
                    if (value !== null && value !== undefined) {
                        searchParams.append(key, value);
                    }
                });
                const queryString = searchParams.toString();
                if (queryString) {
                    fullUrl += (fullUrl.includes('?') ? '&' : '?') + queryString;
                }
            }
            
            // æ·»åŠ hashéƒ¨åˆ†
            fullUrl += hashPart;
            
            return fullUrl;
        }

        function generateWapUrl(path = '', params = {}) {
            return generateUrl(`/syn${path}`, params);
        }

        function testBasicUrl() {
            const url = generateWapUrl('/#/my/index', {});
            const result = document.getElementById('basic-result');
            result.innerHTML = `
                <div class="result-box">${url}</div>
                <div class="success">
                    <span class="check-icon">âœ…</span>
                    åŸºç¡€URLç”ŸæˆæˆåŠŸï¼
                </div>
            `;
        }

        function testUrlWithLang(lang) {
            const url = generateWapUrl('/#/my/index', { lang: lang });
            const result = document.getElementById('lang-result');
            
            // éªŒè¯æ ¼å¼
            const isCorrect = url.includes('?lang=') && url.indexOf('?') < url.indexOf('#');
            
            result.innerHTML = `
                <div class="result-box">${url}</div>
                ${isCorrect ? 
                    '<div class="success"><span class="check-icon">âœ…</span>URLæ ¼å¼æ­£ç¡®ï¼å‚æ•°åœ¨hashä¹‹å‰</div>' :
                    '<div class="error"><span class="check-icon">âŒ</span>URLæ ¼å¼é”™è¯¯ï¼å‚æ•°åº”è¯¥åœ¨hashä¹‹å‰</div>'
                }
            `;
        }

        function validateHashPosition() {
            const testCases = [
                { lang: 'Japanese', expected: true },
                { lang: 'Korean', expected: true },
                { lang: 'en', expected: true },
            ];

            let html = '<table><thead><tr><th>è¯­è¨€</th><th>ç”Ÿæˆçš„URL</th><th>éªŒè¯ç»“æœ</th></tr></thead><tbody>';
            
            testCases.forEach(test => {
                const url = generateWapUrl('/#/my/index', { lang: test.lang });
                const hashIndex = url.indexOf('#');
                const queryIndex = url.indexOf('?lang=');
                const isCorrect = queryIndex < hashIndex && queryIndex !== -1;
                
                html += `
                    <tr>
                        <td>${test.lang}</td>
                        <td style="font-size: 12px; word-break: break-all;">${url}</td>
                        <td style="color: ${isCorrect ? 'green' : 'red'}">
                            ${isCorrect ? 'âœ… æ­£ç¡®' : 'âŒ é”™è¯¯'}
                        </td>
                    </tr>
                `;
            });
            
            html += '</tbody></table>';
            document.getElementById('hash-result').innerHTML = html;
        }

        function testAllLanguages() {
            const languages = [
                { code: 'en', name: 'English' },
                { code: 'Japanese', name: 'æ—¥æœ¬èª' },
                { code: 'Korean', name: 'í•œêµ­ì–´' },
                { code: 'th', name: 'à¹„à¸—à¸¢' },
                { code: 'vi', name: 'Tiáº¿ng Viá»‡t' },
                { code: 'de', name: 'Deutsch' },
                { code: 'es', name: 'EspaÃ±ol' },
                { code: 'fr', name: 'FranÃ§ais' },
                { code: 'Italy', name: 'Italiano' },
                { code: 'pt', name: 'PortuguÃªs' },
                { code: 'gr', name: 'Î•Î»Î»Î·Î½Î¹ÎºÎ¬' },
                { code: 'CN', name: 'ä¸­æ–‡' }
            ];

            let html = '<table><thead><tr><th>è¯­è¨€</th><th>ä»£ç </th><th>ç”Ÿæˆçš„URL</th><th>çŠ¶æ€</th></tr></thead><tbody>';
            let allCorrect = true;
            
            languages.forEach(lang => {
                const url = generateWapUrl('/#/my/index', { lang: lang.code });
                const hashIndex = url.indexOf('#');
                const queryIndex = url.indexOf('?lang=');
                const isCorrect = queryIndex < hashIndex && queryIndex !== -1;
                
                if (!isCorrect) allCorrect = false;
                
                html += `
                    <tr>
                        <td>${lang.name}</td>
                        <td>${lang.code}</td>
                        <td style="font-size: 11px; word-break: break-all;">${url}</td>
                        <td style="color: ${isCorrect ? 'green' : 'red'}">
                            ${isCorrect ? 'âœ…' : 'âŒ'}
                        </td>
                    </tr>
                `;
            });
            
            html += '</tbody></table>';
            
            if (allCorrect) {
                html += '<div class="success"><span class="check-icon">ğŸ‰</span>æ‰€æœ‰è¯­è¨€æµ‹è¯•é€šè¿‡ï¼</div>';
            } else {
                html += '<div class="error"><span class="check-icon">âš ï¸</span>å­˜åœ¨é”™è¯¯çš„URLæ ¼å¼</div>';
            }
            
            document.getElementById('all-lang-result').innerHTML = html;
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨è¿è¡ŒåŸºç¡€æµ‹è¯•
        window.onload = function() {
            testBasicUrl();
        };
    </script>
</body>
</html>

